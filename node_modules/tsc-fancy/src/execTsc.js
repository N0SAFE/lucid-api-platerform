"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const child_process_1 = require("child_process");
const replacers_1 = require("./replacers");
/**
 * Creates a child tsc process.
 *
 * @param options   Options to exec tsc.
 * @returns Spawned tsc child process.
 */
exports.execTsc = (options) => {
    const tsc = options.tsc === undefined
        ? "tsc"
        : options.tsc;
    const args = options.args.length === 0
        ? ""
        : ` ${options.args.join(" ")}`;
    const childProcess = child_process_1.exec(`${tsc}${args}`);
    childProcess.stderr.on("data", (data) => {
        data = replacers_1.applyReplacements(data.toString(), options.replacers);
        process.stdout.write(data);
    });
    childProcess.stdout.on("data", (data) => {
        data = replacers_1.applyReplacements(data.toString(), options.replacers);
        process.stderr.write(data);
    });
    return childProcess;
};
